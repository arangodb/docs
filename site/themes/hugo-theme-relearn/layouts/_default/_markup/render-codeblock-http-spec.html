{{ if site.Params.useCodeblockHook }}
  {{ if site.Params.buildForApiDocs }}
    {{ $request := printf "%s\n%s" .Position .Inner}}
    {{ $endpoint := printf "%s/api-docs" site.Params.arangoproxyUrl }}
    {{ $remote := resources.GetRemote $endpoint (dict
    "method" "post"
    "body" $request 
    "headers" (dict 
        "Content-Type" "application/json"
        "User-Agent" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36"
        "Timeout" "10000000"
    )
    )
    }}
    {{ if $remote.Err }}
        {{ warnf "[API-DOCS] ERROR CALLING ENDPOINT %#v" .Position }}
      {{ end }}
  {{ else }}
    {{ $request := printf "%s\n%s" .Position .Inner}}
    {{ $endpoint := printf "%s/http-spec" site.Params.arangoproxyUrl }}
    {{ $remote := resources.GetRemote $endpoint (dict
    "method" "post"
    "body" $request 
    "headers" (dict 
        "Content-Type" "application/json"
        "User-Agent" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36"
        "Timeout" "10000000"
    )
    )
    }}
    {{ if $remote }}
      {{ if $remote.Err }}
        {{ warnf "[HTTP-SPEC] ERROR CALLING ENDPOINT %#v" .Position }}
      {{ else }}
        {{ $response := unmarshal $remote.Content }}
        {{ $spec := $response.spec | jsonify }}
        {{ $seed := "foo" }}
        {{ $random := delimit (shuffle (split (md5 $seed) "" )) "" }}
        <style>  
          rapi-doc::part(section-endpoint-head-method) {
            font-size: 11px;
          }
          .section-tag-header{
            display: none;
          }
          rapi-doc::part(section-header) {
            display: none;
          }
          rapi-doc::part(section-auth) {
            display: none;
          }
          rapi-doc::part(section-servers) {
            display: none;
          }
          
        </style>
        <rapi-doc
          id="{{ $random }}"
          allow-try="false"
          allow-spec-file-download="true"
          default-schema-tab="example"
          font-size="largest"
          layout="column"
          load-fonts="false"
          render-style="view"
          schema-description-expanded="true"
          schema-style="table"
          show-header="false"
          sort-tags="true"
        >
        </rapi-doc>   
        <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            let docEl = document.getElementById("{{ $random }}");
            let strSpec = "{{ $spec }}";
            let objSpec = JSON.parse(strSpec);
            docEl.loadSpec(objSpec);
        })
        </script>
        {{ end }}
      {{ end }}
    {{ end }}
{{ end }}